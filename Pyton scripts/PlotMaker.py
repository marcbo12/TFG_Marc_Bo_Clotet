import pandas as pd
import os
from matplotlib import pyplot as plt
import numpy as np

root = "/home/usuaris/imatge/marc.bo/Downloads/ModelvsTraj/"


for folder in os.listdir(root):
    fig1 = plt.figure()
    for file in os.listdir(root + "/" + folder):
        info = root + "/" + folder + "/" + file
        epochs = pd.read_csv(info, sep=',', header=None)[1].values.tolist()
        epochs = epochs[1:]
        loss = pd.read_csv(info, sep=',', header=None)[2].values.tolist()
        loss = loss[1:]
        loss = list(map(float,loss))

        if file == 'model.csv':
            plt.plot(range(1,21), loss, color='red', label="Model partition")
        else:
            plt.plot(range(1,21), loss, color='green', label="Trajectory partition")
#sp1.fill(epochs, min_loss, max_loss, color=color, alpha=.1)
    plt.ylabel(str(folder) + " Loss")
    plt.xlabel('Epochs')
    plt.xticks(np.arange(1, 21, step=1))
    plt.legend(loc = 'upper right')
    plt.grid(b = True)
    fig1.savefig(f'{root}/{folder}.png', dpi=300)
    plt.close(fig1)


"""

MaxPT = [8.389713843274063, 8.09049703284447, 7.6018335659972385, 7.178081701145254, 6.437134685853145, 5.807122074519483, 5.18043443208378, 4.767152785438934, 4.374220311264404, 4.074936163243595, 3.7716232903363895, 3.5675769554283177, 3.34913167585101, 3.098848796511479, 2.8810176771693605, 2.7611304147318094, 2.605044924007345, 2.482126550856964, 2.3384684056355556, 2.1920969502491783]
MinPT =[7.038444456137597, 6.536152999875229, 6.1943192820403175, 5.584599980985447, 5.140088937562022, 4.5701672947883205, 4.252647885319253, 3.8831315569909335, 3.581391689394863, 3.394326565258586, 3.1190349349184223, 2.918980149304269, 2.7412943500224283, 2.51790562154368, 2.3374028255864756, 2.218513435816658, 2.1164379297788387, 1.9769284445041904, 1.8924341977956163, 1.777380655700332]
MeanPT = [7.778030174138943, 7.3521263063536635, 6.79579950051928, 6.208372607793418, 5.57523628573359, 5.030389726538518, 4.588204287909886, 4.2166833240409245, 3.895854757402584, 3.6159011163629677, 3.3482242012581667, 3.125993131936206, 2.9413518709047053, 2.747642972124025, 2.5491991418457465, 2.4053440794333567, 2.264808826969263, 2.149368771702922, 2.0366257083968358, 1.920063531520959]
MaxYT =[84.81353283474438, 77.15319756383796, 74.78103958534271, 69.29383677822867, 67.53351495004651, 63.93420369049392, 60.86211940629238, 58.78408518527641, 55.12051122775968, 53.60342919615525, 50.78813435720592, 48.52911209488899, 46.33669148998335, 44.007332020593736, 41.83177093310539, 39.68404743434025, 39.01390092921364, 36.003226066092964, 35.51186783262632, 33.47886931724322]
MinYT =[78.98932388353586, 75.30180162256715, 71.74645671384548, 66.69807858597657, 62.81849106693875, 58.14961237596622, 54.50374207745628, 49.82513938231535, 46.07729275098767, 43.93485424435601, 40.85884121674475, 38.572423610091214, 36.23838014755932, 34.90332337800423, 32.9678572036383, 31.70586643777043, 29.775802086092558, 29.13825858484814, 27.223011696162814, 25.907079293546925]
MeanYT = [82.0527112301575, 76.13057102243376, 72.74785721333609, 68.36387466804703, 64.82661194556115, 60.6834699425904, 57.27935732610015, 54.32785577382883, 50.80086635735893, 48.46440568357604, 45.396205063206665, 43.01627591953358, 40.35850739980691, 38.55943122269014, 36.023651896911126, 34.39927323494037, 32.75462497584635, 31.215367317502455, 29.73797076368262, 28.338544535510852]
MaxPV =[10.006128532868718, 9.662402495921155, 11.106404440407504, 8.890145907514059, 13.394864973701438, 8.410638133579095, 9.249953657563772, 8.23501587832431, 8.10118637565561, 8.437095970367533, 8.146305836773355, 7.949236776848381, 8.479697343817472, 8.27984623957656, 7.968815479905877, 8.30369350767649, 8.18111113382589, 8.309866790281713, 7.743514615259259, 7.646542819434972]
MinPV =[5.8168916460604, 6.475976458197757, 6.707935961070077, 5.418788138098841, 5.935008828159913, 5.105397380978259, 5.427535203874942, 5.231241498163307, 5.367357032314657, 5.8130797734425705, 5.355059019268057, 5.149351572604503, 5.015494348327703, 4.92292442120623, 5.084730575477961, 4.8099621189616695, 5.079853889121251, 5.04374596524867, 4.875695004953862, 4.959566876599526]
MeanPV = [8.220094386425306, 7.825570331727491, 8.704102496948938, 7.374726101125707, 8.593674874957301, 6.5410790446850715, 6.883076278074336, 6.485817988818883, 6.61746832890425, 6.603307497290563, 6.309104412870289, 6.137870291847648, 6.191885957049342, 6.090211958585702, 6.0515332874610435, 6.2025659175494665, 6.154147336315911, 6.169595521851553, 6.243660591064619, 6.09857201410801]
MaxYV = [96.78169965877102, 103.8800770009493, 83.0556617622695, 94.15471439082964, 71.56071763608546, 73.12232321540716, 71.57720041322622, 67.99288121811249, 70.68148608436469, 67.49079306286919, 67.7012990353673, 60.762411036112205, 59.171625260652405, 60.215750677668844, 61.145724781851754, 61.81951641050476, 61.32665481962644, 56.03946468155968, 57.80727741983932, 56.46637441607129]
MinYV =[70.68731079401756, 64.70454459742056, 63.76531782121061, 60.09243731338818, 53.54153584062723, 55.655819331351616, 51.21357017588374, 51.67289124491436, 48.7255765280612, 51.46155052831554, 49.86562540815, 45.30049064153384, 44.26418732934283, 43.49907078147881, 43.43383242684117, 43.92854066424712, 42.048947972489444, 41.41164208956199, 45.7499321069051, 42.04813763543552]
MeanYV = [82.79880953831497, 80.50656046326246, 71.76532437868369, 72.85997173962889, 64.8997383654684, 63.89451471349935, 62.38032854290293, 58.860016526722504, 61.301924006873186, 59.26196932537416, 57.97693162840263, 52.89701295963422, 52.58622156997393, 51.05834229873219, 50.61467978762854, 51.91378131232781, 50.90349371070142, 48.21797753620383, 51.609173809053985, 48.5789404710368]

fig1 = plt.figure()
plt.plot(range(1, 21), MeanPV, color= 'cyan', label= 'Pitch Validation Loss')
plt.fill_between(range(1, 21), MinPV, MaxPV, color='cyan', alpha=.1)
plt.grid(b=True)
plt.xticks(np.arange(1, 21, step=1))
plt.xlabel('Epochs')
plt.ylabel('Pitch Validation Loss')

fig1.savefig(f'/home/usuaris/imatge/marc.bo/proj/headpose/images/PitchVal_loss.png', dpi=100)
plt.close(fig1)
"""